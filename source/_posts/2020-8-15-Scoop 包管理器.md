---
title: Scoop åŒ…ç®¡ç†å™¨
date: 2020-08-15 15:20:09
tags: [Scoop]
categories: [æœªåˆ†ç±» ]
---

`Scoop`æ˜¯ä¸€ä¸ª`Windows`ä¸‹çš„åŒ…ç®¡ç†å™¨ï¼Œå®Œå…¨å…è´¹ï¼Œä¾èµ–äº`Github`ã€‚
{% note warning no-icon åº”æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ %}

- ç”¨æˆ·åä¸å«ä¸­æ–‡å­—ç¬¦
- èƒ½æ­£å¸¸ã€å¿«é€Ÿçš„è®¿é—® GitHub å¹¶ä¸‹è½½ä¸Šé¢çš„èµ„æº
- å¦‚æœä¸‹è½½scoopçš„è¿‡ç¨‹ä¸­æ–­ï¼Œé‚£ä¹ˆå¿…é¡»å…ˆåˆ é™¤(`C:\Users\<user>\scoop`)æ–‡ä»¶å¤¹ï¼Œå†æ‰§è¡Œä»¥ä¸Šå‘½ä»¤å®‰è£…ã€‚
- Windows 7 SP1+ / Windows Server 2008+
- PowerShell 3+
- .NET Framework 4.5+

è‹¥Powershellæˆ–.NET Franmeworkç‰ˆæœ¬è¿‡æ—§ï¼Œæ›´æ–°åé‡å¯å³å¯ã€‚
è‹¥ä¸æ¸…æ¥šç‰ˆæœ¬å·ï¼Œå¯`Win+R`è¿è¡Œ`powershell`ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤è·å–ç‰ˆæœ¬å·ã€‚

```
$PSVersionTable.PSVersion.Major   #æŸ¥çœ‹Powershellç‰ˆæœ¬ > 3
$PSVersionTable.CLRVersion.Major  #æŸ¥çœ‹.NET Frameworkç‰ˆæœ¬ > 4.5
```

{% endnote %}
<!-- more -->

# è·å– Scoop åŒ…ç®¡ç†å™¨ 

## å®‰è£… scoop
```powershell
# å‡†å¤‡å°† Scoop æœ¬ä½“å®‰è£…åˆ°å·²å®šä¹‰ç›®å½•
$env:SCOOP='D:\Scoop'
# å…ˆæ·»åŠ ç”¨æˆ·çº§åˆ«çš„ç¯å¢ƒå˜é‡ SCOOP
[environment]::setEnvironmentVariable('SCOOP',$env:SCOOP,'User')

# å…è®¸æœ¬åœ°è„šæœ¬çš„æ‰§è¡Œï¼š
set-executionpolicy remotesigned -scope currentuser
# å®‰è£… Scoopï¼š
Invoke-Expression (New-Object System.Net.WebClient).DownloadString('https://get.scoop.sh')
# æˆ–è€…æ›´çŸ­
#iwr -useb get.scoop.sh | iex

# å®‰è£…å®Œæˆï¼ŒæŸ¥çœ‹ scoop çš„ç‰ˆæœ¬å’Œ main bucket çš„ç‰ˆæœ¬
scoop -v
```

## ~~ä¿®æ”¹é»˜è®¤å…¨å±€å®‰è£…è·¯å¾„ï¼Œä½“ç°åœ¨é¢å¤–çš„å‚æ•°`-g`ä¸Š~~
```powershell
$env:SCOOP_GLOBAL='D:\GlobalScoopApps'
[environment]::setEnvironmentVariable('SCOOP_GLOBAL',$env:SCOOP_GLOBAL,'Machine')
```
## æ›´æ–° Scoop
```powershell
scoop update
```
## å¸è½½ Scoop 
```powershell
scoop uninstall scoop
```

# ç®¡ç†ä»“åº“
`Scoop` é»˜è®¤ä½¿ç”¨çš„æ˜¯ `main` ä»“åº“ï¼Œå®˜æ–¹ç»´æŠ¤çš„å¦ä¸€ä¸ª `Bucket` ä¸º `extras` ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ã€‚æœ‰äº›è½¯ä»¶å¹¶æ²¡æœ‰æ”¶å½•åœ¨ä»“åº“ä¸­ï¼Œéœ€è¦é¢å¤–æ·»åŠ å…¶ä»–ä»“åº“ã€‚
```powershell
# scoop help bucket
Usage: scoop bucket add|list|known|rm [<args>]
# ...
```

## æŸ¥è¯¢ä»“åº“
```powershell
# æŸ¥çœ‹å¯ç›´æ¥æ·»åŠ çš„ä»“åº“
scoop bucket known
# æŸ¥çœ‹å·²æ·»åŠ çš„ä»“åº“
scoop bucket list
```

## æ·»åŠ ä»“åº“
```powershell
# æ·»åŠ  extras ä»“åº“
scoop bucket add extras
# æ·»åŠ ç¬¬ä¸‰æ–¹ bucket
scoop bucket add <bucketname> https://github.com/xxx/xxx
```

## åˆ é™¤ä»“åº“
```powershell
# åˆ é™¤ extras
scoop bucket rm extras
```

## æ›´æ–°ä»“åº“
```powershell
# æ›´æ–° extras
scoop update
```

## å…¶ä»–ä»“åº“
bucket æ’è¡Œæ¦œ
- [é“¾æ¥1](https://rasa.github.io/scoop-directory/by-score.html)
- [é“¾æ¥2](https://scoop.netlify.app/buckets/)

ä¸€äº› bucket ç®€å•ä»‹ç»
- `main`: é»˜è®¤çš„ä¸»ä»“åº“ 
- `extras`: å¸¸ç”¨ï¼Œè¯¸å¤šæœ‰ç”¨çš„è½¯ä»¶éƒ½åœ¨é‡Œé¢ã€‚åœ°å€ [lukesampson/scoop-extras](https://github.com/lukesampson/scoop-extras/tree/master/bucket)
- `nirsoft`: NirSoft å¼€å‘çš„å°å·¥å…·çš„å®‰è£…åˆé›†ï¼ŒåŒ…æ‹¬ç³»ç»Ÿå·¥å…·ã€ç½‘ç»œå·¥å…·ã€å¯†ç æ¢å¤ç­‰
  - åœ°å€: [kodybrown/scoop-nirsoft](https://github.com/kodybrown/scoop-nirsoft)
  - å®˜ç½‘åœ°å€: [NirSoft](https://www.nirsoft.net/)
- `dorado`: æ·»åŠ äº†ä¸€äº›å›½å†…çš„appï¼Œæ¯”å¦‚ qqplayer ğŸ‘ğŸ»ï¸ [h404bi/dorado](https://github.com/h404bi/dorado)
- `nerd-fonts`: ç¼–ç¨‹å­—ä½“ä¸€è§ˆæ— é— <nonportable>
- `ash258`: [Ash258/scoop-Ash258](https://github.com/Ash258/scoop-Ash258)
- `nonportable`: æ”¶å½•ç¥å¥‡çš„UWPåº”ç”¨ windowså¹³å°åº”ç”¨
- `versions`: æ”¶å½•è½¯ä»¶åŒ…çš„å†å²ç‰ˆæœ¬
- `java`: å¯ä»¥é€šè¿‡å®ƒå®‰è£…å„ç§ jdk ã€ jre

{% note info no-icon%}
ä»“åº“çš„å¤šå°‘å½±å“æœç´¢è½¯ä»¶åŒ…çš„æœç´¢ç»“æœã€æœç´¢é€Ÿåº¦ã€ã€Œä¸€é”®æ›´æ–°ã€çš„é€Ÿåº¦ã€æ¸…ç†çš„é€Ÿåº¦ã€‚æ‰€ä»¥æ”¶å½•/è®¢é˜…å¿…è¦çš„è½¯ä»¶ä»“åº“å³å¯ï¼Œä¹Ÿä¸å¿…ç›²ç›®æ·»åŠ ã€‚
{% endnote%}

# ç®¡ç†APP

## æŸ¥è¯¢APP
```powershell
# æŸ¥æ‰¾APP, ä¸å¸¦APPå³æŸ¥è¯¢æ‰€æœ‰è½¯ä»¶
scoop search <APP>
# æŸ¥çœ‹å·²å®‰è£…çš„ APP
scoop list
```

## å®‰è£…APP
```powershell
## scoop help install
# scoop install <app> [options]
# -g, --global              å…¨å±€å®‰è£…åº”ç”¨
# -i, --independent         ä¸è¦è‡ªåŠ¨å®‰è£…ä¾èµ–
# -k, --no-cache            ä¸ä½¿ç”¨ä¸‹è½½ç¼“å­˜
# -u, --no-update-scoop     å¦‚æœå·²ç»è¿‡æ—¶ï¼Œå®‰è£…å‰ä¸è¦æ›´æ–° Scoop
# -s, --skip                è·³è¿‡å“ˆå¸ŒéªŒè¯ï¼ˆè°¨æ…ä½¿ç”¨ï¼ï¼‰
# -a, --arch <32bit|64bit>  ä½¿ç”¨æŒ‡å®šçš„æ¶æ„ï¼Œå¦‚æœåº”ç”¨æ”¯æŒçš„è¯

# å®‰è£…APP
scoop install <app>
```

## æ›´æ–°APP
```powershell
## scoop help update
# scoop update <app> [options]
# -f, --force       å³ä½¿æ²¡æœ‰æ›´æ–°ç‰ˆæœ¬ä¹Ÿå¼ºåˆ¶æ›´æ–°
# -g, --global      æ›´æ–°å…¨å±€å®‰è£…çš„åº”ç”¨
# -i, --independent ä¸è¦è‡ªåŠ¨å®‰è£…ä¾èµ–
# -k, --no-cache    ä¸ä½¿ç”¨ä¸‹è½½ç¼“å­˜
# -s, --skip        è·³è¿‡å“ˆå¸ŒéªŒè¯ï¼ˆè°¨æ…ä½¿ç”¨ï¼ï¼‰
# -q, --quiet       éšè—æ— å…³æ¶ˆæ¯
# -a, --all         æ›´æ–°æ‰€æœ‰åº”ç”¨ç¨‹åºï¼ˆæ›¿ä»£â€œ*â€ï¼‰

# æ›´æ–°APP,  ä¸å¸¦APPå³æ›´æ–°scoopæœ¬èº«åŠbucket
scoop update <app>
```

## å¸è½½APP
```powershell
## scoop help uninstall
# scoop uninstall <app> [options]
# -g, --global  å¸è½½å…¨å±€å®‰è£…çš„åº”ç”¨
# -p, --purge   åˆ é™¤æ‰€æœ‰æŒä¹…æ•°æ®

# å¸è½½å¹¶åˆ é™¤é…ç½®æ–‡ä»¶
scoop uninstall -gp <app>
```

## ç¼“å­˜çš„å®‰è£…åŒ…
```powershell
# æ˜¾ç¤ºå®‰è£…åŒ…çš„ç¼“å­˜
scoop cache show
# åˆ é™¤ æŒ‡å®šAPPçš„å®‰è£…åŒ…
scoop cache rm <app>
# åˆ é™¤æ‰€æœ‰APPå®‰è£…åŒ…
scoop cache rm *
# ç¦ç”¨å®‰è£…åŒ…ç¼“å­˜ -k æˆ– --no-cache
scoop install -k <app>
scoop update -k *
```

## åˆ é™¤æ—§ç‰ˆæœ¬APP
ç”±äºè‡ªèº«çš„ç‰¹æ€§ï¼ˆæ»šåŠ¨æ›´æ–°ï¼Œå½“æ›´æ–°æ—¶æ˜¯ç«‹åˆ»æ‹‰å–æœ€æ–°çš„commitï¼‰å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå¼‚å¸¸ï¼Œæ‰€ä»¥å½“è½¯ä»¶è¢«æ›´æ–°å Scoop è¿˜ä¼šä¿ç•™è½¯ä»¶çš„æ—§ç‰ˆæœ¬ï¼Œæ›´æ–°è½¯ä»¶åå¯ä»¥é€šè¿‡ scoop cleanup å‘½ä»¤è¿›è¡Œåˆ é™¤ã€‚
```powershell
# åˆ é™¤æŒ‡å®šAPPæ—§ç‰ˆæœ¬
scoop cleanup <app>
# åˆ é™¤æ‰€æœ‰APPæ—§ç‰ˆæœ¬
scoop cleanup *
# ä¸ä»…åˆ é™¤æ‰€æœ‰APPæ—§ç‰ˆæœ¬ï¼Œä¹ŸåŒ…æ‹¬ç¼“å­˜çš„å®‰è£…åŒ…
scoop cleanup -k *
```


## æ¨èè½¯ä»¶

### å¿…è£…

- `7zip`
- `git`
- `aria2` # å®‰è£…aria2åï¼Œscoopä¼šè‡ªåŠ¨è°ƒç”¨aria2è¿›è¡Œå¤šçº¿ç¨‹ä¸‹è½½ä»¥åŠ é€Ÿä¸‹è½½
- `curl`
- `miniconda3` # ç”±äºscoopä¸ä¿ç•™ Conda envs å’Œ pkgsï¼Œåœ¨æ›´æ–°ååˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒä¼šä¸¢å¤±ï¼Œæ‰€ä»¥å»ºè®®è®¾ç½® `envs_dirs` ä»¥ä½¿ç”¨ '~/.conda/envs'
  ```bash ä¿®æ”¹é…ç½®æ–‡ä»¶ ~/.condarc
  envs_dirs:
    - D:/Scoop/apps/miniconda3/envs
  pkgs_dirs:
    - D:/Scoop/apps/miniconda3/pkgs
  ```

### å¯é€‰

- vscode 
- mactype-np # è£…æœºå¿…å¤‡çš„å­—ä½“ä¼˜åŒ–å·¥å…·
- motrix # å¼€æºç¾è§‚çš„ä¸‹è½½å·¥å…·
- potplayer # è¶…å¼ºçš„è§†é¢‘æ’­æ”¾å™¨
- quicklook # å¿«é€Ÿé¢„è§ˆå·¥å…·
- snipaste # å¤§åé¼é¼çš„æˆªå›¾å·¥å…·
- typora # ä¹…è´Ÿç››åçš„ Markdown ç¼–è¾‘å™¨
- windows-terminal # windowså®˜æ–¹çš„ç»ˆç«¯åº”ç”¨
- fluent-terminal-np # Windowså¹³å°ç»ˆç«¯å·¥å…·
- sudo
- gcc
- vim 

### å…¶ä»–

- gimp 
- inkscape 
- latex 
- calibre 
- zotero


# åŠ é€Ÿä¸‹è½½

åœ¨ä½¿ç”¨scoopå®‰è£…aria2åï¼Œscoopä¼šè‡ªåŠ¨è°ƒç”¨aria2è¿›è¡Œå¤šçº¿ç¨‹ä¸‹è½½ä»¥åŠ é€Ÿä¸‹è½½ï¼š
```bash
scoop install aria2

scoop aria2-enabled true
scoop config aria2-max-connection-per-server 16
scoop config aria2-split 16
scoop config aria2-min-split-size 1M

# aria2-enabled (é»˜è®¤å€¼: true)
# aria2-retry-wait (é»˜è®¤å€¼: 2)
# aria2-split (é»˜è®¤å€¼: 5)
# aria2-max-connection-per-server (é»˜è®¤å€¼: 5)
# aria2-min-split-size (é»˜è®¤å€¼: 5M)

# scoop config proxy 127.0.0.1:10809 ï¼ˆé¢å¤–çš„ä»£ç†ï¼Œå¦‚æœæœ‰çš„è¯ï¼‰
```

# å­—ä½“
```powershell
# æ·»åŠ  nerd-fonts ä»“åº“
scoop bucket add nerd-fonts
# æœç´¢å­—ä½“
scoop search "-NF"
# å®‰è£…å­—ä½“
sudo scoop install FiraCode-NF
```

# ææƒ
å¦‚æœä¸æ˜¯ä»¥ç®¡ç†å‘˜çš„èº«ä»½è¿è¡ŒPowerShellï¼Œå¸¸å¸¸ä¼šå‡ºç°ä¸€äº›é”™è¯¯ã€‚æ­¤æ—¶sudoæ¥äº†ã€‚
```powershell
scoop install -g sudo
sudo scoop install -g <app>
```



# å…¶ä»–é—®é¢˜

## 1. æ·»åŠ extraså¤±è´¥

ä½¿ç”¨å‘½ä»¤`scoop bucket add extras`æ·»åŠ ä»“åº“æ—¶å‡ºç°é”™è¯¯ï¼š
```powershell
Checking repo... ok
efatal: the remote end hung up unexpectedly
rror: RPC failed; curl 18 transfer closed with outstanding read data remaining
fatal: early EOF
fatal: index-pack failed
The extras bucket was added successfully.
```
è™½ç„¶æç¤ºæ·»åŠ æˆåŠŸï¼Œä½†åœ¨å®‰è£…`anaconda3`è½¯ä»¶æ—¶å‡ºç°ï¼š
```powershell
Updating Scoop...
Updating 'extras' bucket...
fatal: not a git repository (or any of the parent directories): .git
fatal: not a git repository (or any of the parent directories): .git
fatal: not a git repository (or any of the parent directories): .git
Updating 'main' bucket...
 * 9d903fc3 git-up: Update to version 2.0.0                              9 hours ago
Scoop was updated successfully!
Couldn't find manifest for 'anaconda3'.
```
çœ‹èµ·æ¥æ˜¯æ–‡ä»¶å¤¹é‡Œç¼ºå°‘ä¸€äº›å¿…è¦çš„ä¸œè¥¿ï¼Œäºæ˜¯å»æŸ¥çœ‹ä»“åº“æ‰€åœ¨è·¯å¾„(C:\Users\\\<user>\scoop\buckets)ï¼Œå‘ç°`extras`åªæ˜¯ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œä¸ºæ­¤åœ¨ç½‘ç»œä¸Šæœç½—è§£å†³åŠæ³•ï¼š
- ~~è¯´æ˜¯ç¼“å†²åŒºæº¢å‡ºï¼Œéœ€è¦æ‰§è¡Œ`git config --global http.postBuffer 524288000`ï¼Œæ— æœï¼~~
- ~~è¯´æ˜¯ç½‘ç»œå¤ªæ…¢ï¼Œéœ€è¦æ‰§è¡Œ`git config --global http.lowSpeedLimit 0`å’Œ`git config --global http.lowSpeedTime 999999`ï¼Œæ— æœï¼~~
```powershell
Checking repo... ok
efrror: RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errno 10054
fatal: the remote end hung up unexpectedly
atal: early EOF
fatal: index-pack failed
The extras bucket was added successfully.
```
- ~~éœ€è¦æ‰§è¡Œ`git config --global http.sslVerify "false"`ï¼Œæ— æœï¼~~
```powershell
Checking repo... ok
efrror: RPC failed; curl 18 transfer closed with outstanding read data remaining
atal: the remote end hung up unexpectedly
fatal: early EOF
fatal: index-pack failed
The extras bucket was added successfully.
```
- éœ€è¦æ‰§è¡Œ`git clone --depth=1 https://github.com/lukesampson/scoop-extras.git`ï¼Œ**æˆåŠŸï¼ï¼**
è¿™é‡Œæ˜¯å…ˆæ‰¾åˆ°`extras`ä»“åº“åˆ†æ”¯ï¼Œç„¶ååœ¨è·¯å¾„(C:\Users\\\<user>\scoop)ä¸‹`clone`è¿™ä¸ªåˆ†æ”¯ï¼Œå†ä¿®æ”¹ä¸‹è¿™ä¸ªä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶å¤¹çš„åç§°ä¸º`extras`ï¼Œå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚
> æ³¨ï¼š`--depth=1`å‚æ•°æ˜¯æŒ‡åªå…‹éš†æœ€è¿‘ä¸€æ¬¡commitï¼Œåªä¼šæŠŠé»˜è®¤åˆ†æ”¯cloneä¸‹æ¥ã€‚å¯¹ä¸æ˜¯å‚ä¸æ•´ä¸ªé¡¹ç›®çš„å¼€å‘å·¥ä½œçš„æˆ‘ä»¬æ¥è¯´é—®é¢˜ä¸å¤§ã€‚

---
# ç›¸å…³é“¾æ¥
- [Scoop å®˜ç½‘](https://scoop.sh/)
- [Quick Start On GitHub](https://github.com/lukesampson/scoop/wiki/Quick-Start)